(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1295:function(e,t,n){"use strict";e.exports={fragment:{argumentDefinitions:[{kind:"LocalArgument",name:"selectedItemIds",type:"[String]",defaultValue:null},{kind:"LocalArgument",name:"loadPortfolioData",type:"Boolean!",defaultValue:null},{kind:"LocalArgument",name:"userIds",type:"[String]!",defaultValue:null}],kind:"Fragment",metadata:null,name:"HeartWrapperRefetchQuery",selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"Viewer",name:"viewer",plural:!1,selections:[{kind:"FragmentSpread",name:"HeartWrapper_viewer",args:[{kind:"Variable",name:"loadPortfolioData",variableName:"loadPortfolioData",type:null},{kind:"Variable",name:"selectedItemIds",variableName:"selectedItemIds",type:null},{kind:"Variable",name:"userIds",variableName:"userIds",type:null}]}],storageKey:null}],type:"RootQueryType"},id:"app-buyer-mobile/170.0.0-2018-06-04T16:19:13.071Z/HeartWrapperRefetchQuery",kind:"Batch",metadata:{},name:"HeartWrapperRefetchQuery",query:{argumentDefinitions:[{kind:"LocalArgument",name:"selectedItemIds",type:"[String]",defaultValue:null},{kind:"LocalArgument",name:"loadPortfolioData",type:"Boolean!",defaultValue:null},{kind:"LocalArgument",name:"userIds",type:"[String]!",defaultValue:null}],kind:"Root",name:"HeartWrapperRefetchQuery",operation:"query",selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"Viewer",name:"viewer",plural:!1,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"Condition",passingValue:!0,condition:"loadPortfolioData",selections:[{kind:"LinkedField",alias:"heartItemMatches",args:[{kind:"Variable",name:"itemIds",variableName:"selectedItemIds",type:"[String]"},{kind:"Literal",name:"portfolioTypes",value:["HEART"],type:"[PortfolioTypes]"},{kind:"Variable",name:"userIds",variableName:"userIds",type:"[String]"}],concreteType:"PortfolioItemV2",name:"portfolioItemMatches",plural:!0,selections:[{kind:"ScalarField",alias:null,args:null,name:"portfolioId",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"portfolioItemId",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"Item",name:"item",plural:!1,selections:[{kind:"ScalarField",alias:null,args:null,name:"serviceId",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null},{kind:"LinkedField",alias:"userPortfolios",args:[{kind:"Literal",name:"first",value:1,type:"Int"},{kind:"Literal",name:"portfolioTypes",value:["HEART"],type:"[PortfolioTypes]"},{kind:"Variable",name:"userIds",variableName:"userIds",type:"[String]"}],concreteType:"PortfoliosConnection",name:"portfolios",plural:!1,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"PortfoliosEdge",name:"edges",plural:!0,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"PortfolioV2",name:"node",plural:!1,selections:[{kind:"ScalarField",alias:null,args:null,name:"serviceId",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]}],storageKey:null}]},text:null}},1296:function(e,t,n){"use strict";e.exports={argumentDefinitions:[{kind:"LocalArgument",name:"selectedItemIds",type:"[String]",defaultValue:[]},{kind:"LocalArgument",name:"loadPortfolioData",type:"Boolean",defaultValue:!1},{kind:"LocalArgument",name:"userIds",type:"[String]",defaultValue:[]}],kind:"Fragment",metadata:null,name:"HeartWrapper_viewer",selections:[{kind:"Condition",passingValue:!0,condition:"loadPortfolioData",selections:[{kind:"LinkedField",alias:"heartItemMatches",args:[{kind:"Variable",name:"itemIds",variableName:"selectedItemIds",type:"[String]"},{kind:"Literal",name:"portfolioTypes",value:["HEART"],type:"[PortfolioTypes]"},{kind:"Variable",name:"userIds",variableName:"userIds",type:"[String]"}],concreteType:"PortfolioItemV2",name:"portfolioItemMatches",plural:!0,selections:[{kind:"ScalarField",alias:null,args:null,name:"portfolioId",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"portfolioItemId",storageKey:null},{kind:"LinkedField",alias:null,args:null,concreteType:"Item",name:"item",plural:!1,selections:[{kind:"ScalarField",alias:null,args:null,name:"serviceId",storageKey:null}],storageKey:null}],storageKey:null},{kind:"LinkedField",alias:"userPortfolios",args:[{kind:"Literal",name:"first",value:1,type:"Int"},{kind:"Literal",name:"portfolioTypes",value:["HEART"],type:"[PortfolioTypes]"},{kind:"Variable",name:"userIds",variableName:"userIds",type:"[String]"}],concreteType:"PortfoliosConnection",name:"portfolios",plural:!1,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"PortfoliosEdge",name:"edges",plural:!0,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"PortfolioV2",name:"node",plural:!1,selections:[{kind:"ScalarField",alias:null,args:null,name:"serviceId",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]}],type:"Viewer"}},1297:function(e,t,n){"use strict";e.exports={fragment:{argumentDefinitions:[{kind:"LocalArgument",name:"input",type:"ModifyPortfolioItemsInput!",defaultValue:null}],kind:"Fragment",metadata:null,name:"ModifyPortfolioItemsMutation",selections:[{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"input",variableName:"input",type:"ModifyPortfolioItemsInput!"}],concreteType:"ModifyPortfolioItemsPayload",name:"modifyPortfolioItems",plural:!1,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"PortfolioV2",name:"portfolio",plural:!1,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null}],storageKey:null}],type:"Mutations"},id:"app-buyer-mobile/170.0.0-2018-06-04T16:19:13.071Z/ModifyPortfolioItemsMutation",kind:"Batch",metadata:{},name:"ModifyPortfolioItemsMutation",query:{argumentDefinitions:[{kind:"LocalArgument",name:"input",type:"ModifyPortfolioItemsInput!",defaultValue:null}],kind:"Root",name:"ModifyPortfolioItemsMutation",operation:"mutation",selections:[{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"input",variableName:"input",type:"ModifyPortfolioItemsInput!"}],concreteType:"ModifyPortfolioItemsPayload",name:"modifyPortfolioItems",plural:!1,selections:[{kind:"LinkedField",alias:null,args:null,concreteType:"PortfolioV2",name:"portfolio",plural:!1,selections:[{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},text:null}},1299:function(e,t,n){e.exports={heart:"Heart-Styles__heart__ded0df93",icon:"Heart-Styles__icon__ded0df93",productTile:"Heart-Styles__productTile__ded0df93",isFilled:"Heart-Styles__isFilled__ded0df93",outlined:"Heart-Styles__outlined__ded0df93"}},1308:function(e,t,n){"use strict";n.r(t);var l=n(0),a=n.n(l),i=n(3),o=(n(4),n(135)),r=n.n(o),s=n(5),u=n.n(s),d=n(1299),p=n.n(d);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){var t,n=u()(p.a.heart,e.className),l=u()(p.a.icon,(c(t={},p.a.isFilled,e.isFavorited),c(t,p.a.outlined,!e.isFavorited),c(t,p.a[e.type],e.type),t)),i=e.isFavorited?"item-saved-icon":"item-save-icon";return a.a.createElement("div",{className:n,"data-tn":i,onClick:e.onClick},a.a.createElement(r.a,{className:l}))};m.defaultProps={isFavorited:!1,type:"productTile"};var f=m,y=n(1),I=n.n(y),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},k=function(){return n(1297)};var v={commit:function(e,t){var n=t.action,l=t.itemsIds,a=t.portfolioId,o=t.portfolioItemsIds,r=t.userId,s=t.onCompleted,u=t.onError,d={action:n,portfolioId:a,userId:r};"REMOVE"===n?d=g({},d,{portfolioItemsIds:o}):"ADD"===n&&(d=g({},d,{itemsIds:l})),Object(i.commitMutation)(e,{mutation:k,variables:{input:d},onCompleted:s,onError:u})}},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,n,l){return n&&e(t.prototype,n),l&&e(t,l),t}}();var F=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.waitingForRelay=!1,n.favoriteItem=n.favoriteItem.bind(n),n.onHeartClick=n.onHeartClick.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l["Component"]),h(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.forceFavoriteItem&&this.props.onHeartClick&&this.props.onHeartClick(function(e){var n=e.portfolioId,l=e.userId;!I()(t.props,"viewer.userPortfolios.edges[0].node.serviceId")&&n&&t.favoriteItem({portfolioId:n,userId:l})})}},{key:"componentDidUpdate",value:function(e){this.waitingForRelay&&I()(this.props,"viewer.userPortfolios")&&!I()(e,"viewer.userPortfolios")&&(this.waitingForRelay=!1,this.favoriteItem({userId:this.props.userId,portfolioId:I()(this.props,"viewer.userPortfolios.edges[0].node.serviceId")}))}},{key:"favoriteItem",value:function(e){var t=this,n=e.portfolioId,l=e.userId,a=I()(this.props,"viewer.heartItemMatches")||[],i=a.reduce(function(e,n){return I()(n,"item.serviceId")===t.props.itemId&&e.push(n),e},[]),o=i&&i.length&&!this.waitingForRelay?"REMOVE":"ADD",r=a.reduce(function(e,n){return I()(n,"item.serviceId")===t.props.itemId&&e.push(n.portfolioItemId),e},[]);n&&!this.waitingForRelay&&(this.waitingForRelay=!0,v.commit(this.props.relay.environment,{action:o,itemsIds:[this.props.itemId],portfolioItemsIds:"REMOVE"===o?r:null,portfolioId:n,userId:l,onCompleted:function(){"ADD"===o&&t.props.onFavorited?t.props.onFavorited():"REMOVE"===o&&t.props.onUnFavorited&&t.props.onUnFavorited(),t.props.relay.refetch(function(e){return e},null,function(){t.waitingForRelay=!1})},onError:function(e){t.props.onError&&t.props.onError(e),t.waitingForRelay=!1}}))}},{key:"onHeartClick",value:function(e){var t=this;e.preventDefault(),this.props.onHeartClick&&this.props.onHeartClick(function(e){var n=e.portfolioId,l=e.userId;return t.favoriteItem({portfolioId:n,userId:l})});var n=I()(this.props,"viewer.userPortfolios.edges[0].node.serviceId"),l=this.props.userId;this.props.userId?this.favoriteItem({portfolioId:n,userId:l}):this.props.authModalShow(function(){t.waitingForRelay=!0})}},{key:"render",value:function(){var e=this,t=(I()(this.props,"viewer.heartItemMatches")||[]).reduce(function(t,n){return I()(n,"item.serviceId")===e.props.itemId&&t.push(n),t},[]);return a.a.createElement(f,{className:this.props.className,isFavorited:!!t&&!!t.length,onClick:this.onHeartClick,type:this.props.type})}}]),t}();F.defaultProps={forceFavoriteItem:!1,portfolioItemId:"",portfolioId:null,selectedItemIds:[],type:"productTile",userId:""};var b=Object(i.createRefetchContainer)(F,{viewer:function(){return n(1296)}},function(){return n(1295)});n.d(t,"HeartWrapper",function(){return b});t.default=b}}]);
//# sourceMappingURL=buyer-responsive-HeartWrapper.170.1.3.00c63e106d993e5547c0.js.map